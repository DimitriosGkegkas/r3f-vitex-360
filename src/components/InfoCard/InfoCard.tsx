import React from 'react';
import './InfoCard.css';
import { AnimatedIcon } from '../AnimatedIcon';

interface InfoCardProps {
  title: string;
  description: string;
  step?: string;
  floor?: string;
  currentStep?: number;
  totalSteps?: number;
  className?: string;
  children?: React.ReactNode;
  onNext?: () => void;
  onPrev?: () => void;
  billboard?: boolean;
}

export const InfoCard: React.FC<InfoCardProps> = ({
  title,
  description,
  step,
  floor,
  currentStep,
  totalSteps,
  className = '',
  children,
  onNext,
  onPrev,
  billboard = false
}) => {
  return (
    <div className={`info-card ${billboard ? 'billboard' : ''} ${className}`}>
      {(step || floor) && (
        <div className="info-meta">
          {step && (
            <div className="meta-item">
              <div className="meta-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M19.1923 5.80782L16.6923 3.30782C16.575 3.19055 16.4159 3.12466 16.2501 3.12466C16.0842 3.12466 15.9252 3.19055 15.8079 3.30782C15.6906 3.4251 15.6247 3.58416 15.6247 3.75001C15.6247 3.91586 15.6906 4.07492 15.8079 4.1922L17.2415 5.62501H16.2501C12.3962 5.62501 11.4805 7.82189 10.6735 9.75939C9.94071 11.518 9.35164 12.9305 6.80789 13.1063C6.64827 12.3485 6.21295 11.6769 5.58634 11.2219C4.95974 10.7668 4.18648 10.5606 3.41648 10.6432C2.64648 10.7259 1.9346 11.0915 1.41885 11.6692C0.903097 12.2469 0.620221 12.9955 0.625061 13.7699C0.629901 14.5443 0.922112 15.2894 1.44504 15.8606C1.96797 16.4318 2.68437 16.7885 3.45534 16.8615C4.22631 16.9345 4.99694 16.7186 5.61781 16.2558C6.23868 15.7929 6.66556 15.116 6.81571 14.3563C10.1954 14.1492 11.061 12.0789 11.8266 10.2399C12.6102 8.35939 13.229 6.87501 16.2501 6.87501H17.2415L15.8079 8.30782C15.6906 8.4251 15.6247 8.58416 15.6247 8.75001C15.6247 8.91586 15.6906 9.07492 15.8079 9.1922C15.9252 9.30948 16.0842 9.37536 16.2501 9.37536C16.4159 9.37536 16.575 9.30948 16.6923 9.1922L19.1923 6.6922C19.2504 6.63415 19.2965 6.56522 19.3279 6.48935C19.3594 6.41348 19.3756 6.33215 19.3756 6.25001C19.3756 6.16788 19.3594 6.08655 19.3279 6.01067C19.2965 5.9348 19.2504 5.86587 19.1923 5.80782ZM3.75008 15.625C3.37924 15.625 3.01673 15.515 2.70839 15.309C2.40004 15.103 2.15972 14.8102 2.01781 14.4675C1.87589 14.1249 1.83876 13.7479 1.91111 13.3842C1.98346 13.0205 2.16203 12.6864 2.42426 12.4242C2.68648 12.162 3.02057 11.9834 3.38429 11.911C3.748 11.8387 4.125 11.8758 4.46761 12.0177C4.81022 12.1597 5.10306 12.4 5.30909 12.7083C5.51511 13.0167 5.62508 13.3792 5.62508 13.75C5.62508 14.2473 5.42754 14.7242 5.07591 15.0758C4.72428 15.4275 4.24736 15.625 3.75008 15.625Z" fill="#4D4D4D" />
                </svg>
              </div>
              <span className="meta-label">Βήμα:</span>
              <span className="meta-value">{step}</span>
            </div>
          )}
          {floor && (
            <div className="meta-item">
              <div className="meta-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M16.8375 16.6609L12.8524 5.70312L13.5625 3.75H14.375C14.5408 3.75 14.6998 3.68415 14.817 3.56694C14.9342 3.44973 15 3.29076 15 3.125C15 2.95924 14.9342 2.80027 14.817 2.68306C14.6998 2.56585 14.5408 2.5 14.375 2.5H6.87503C6.70927 2.5 6.5503 2.56585 6.43309 2.68306C6.31588 2.80027 6.25003 2.95924 6.25003 3.125C6.25003 3.29076 6.31588 3.44973 6.43309 3.56694C6.5503 3.68415 6.70927 3.75 6.87503 3.75H7.23284L2.53753 16.6609C2.5094 16.7381 2.49676 16.8201 2.50035 16.9022C2.50394 16.9843 2.52368 17.0649 2.55843 17.1393C2.59319 17.2138 2.64229 17.2806 2.70291 17.3361C2.76354 17.3915 2.8345 17.4345 2.91175 17.4625C2.98017 17.4871 3.05231 17.4998 3.12503 17.5C3.25338 17.5 3.37862 17.4605 3.48373 17.3868C3.58884 17.3132 3.66873 17.2089 3.71253 17.0883L4.4719 15H8.14378L7.53909 16.6609C7.51096 16.7381 7.49833 16.8201 7.50191 16.9022C7.5055 16.9843 7.52524 17.0649 7.56 17.1393C7.59475 17.2138 7.64385 17.2806 7.70448 17.3361C7.7651 17.3915 7.83606 17.4345 7.91331 17.4625C7.98124 17.4869 8.05284 17.4996 8.12503 17.5C8.25338 17.5 8.37862 17.4605 8.48373 17.3868C8.58884 17.3132 8.66873 17.2089 8.71253 17.0883L10.1563 13.125H14.2188L15.6602 17.0883C15.7041 17.2093 15.7844 17.3138 15.8899 17.3875C15.9955 17.4612 16.1213 17.5005 16.25 17.5C16.3227 17.4998 16.3949 17.4871 16.4633 17.4625C16.5406 17.4345 16.6115 17.3915 16.6721 17.3361C16.7328 17.2806 16.7819 17.2138 16.8166 17.1393C16.8514 17.0649 16.8711 16.9843 16.8747 16.9022C16.8783 16.8201 16.8657 16.7381 16.8375 16.6609ZM9.96253 10H6.29065L7.19925 7.5H10.8711L9.96253 10ZM12.2352 3.75L11.3235 6.25H7.65628L8.56253 3.75H12.2352ZM4.92659 13.75L5.83596 11.25H9.50784L8.59378 13.75H4.92659ZM10.6078 11.875L12.1875 7.53203L13.7664 11.875H10.6078Z" fill="#4D4D4D" />
                </svg>
              </div>
              <span className="meta-label">Όροφος:</span>
              <span className="meta-value">{floor}</span>
            </div>
          )}
          <div className="info-close">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M13.067 12.1828C13.1251 12.2409 13.1712 12.3098 13.2026 12.3857C13.234 12.4616 13.2502 12.5429 13.2502 12.625C13.2502 12.7071 13.234 12.7885 13.2026 12.8643C13.1712 12.9402 13.1251 13.0091 13.067 13.0672C13.009 13.1253 12.94 13.1713 12.8642 13.2028C12.7883 13.2342 12.707 13.2504 12.6249 13.2504C12.5427 13.2504 12.4614 13.2342 12.3855 13.2028C12.3097 13.1713 12.2407 13.1253 12.1827 13.0672L6.99986 7.88361L1.81705 13.0672C1.69977 13.1845 1.54071 13.2504 1.37486 13.2504C1.20901 13.2504 1.04995 13.1845 0.932672 13.0672C0.815396 12.9499 0.749512 12.7909 0.749512 12.625C0.749512 12.4592 0.815396 12.3001 0.932672 12.1828L6.11627 7.00001L0.932672 1.8172C0.815396 1.69992 0.749512 1.54086 0.749512 1.37501C0.749512 1.20916 0.815396 1.0501 0.932672 0.932824C1.04995 0.815549 1.20901 0.749664 1.37486 0.749664C1.54071 0.749664 1.69977 0.815549 1.81705 0.932824L6.99986 6.11642L12.1827 0.932824C12.2999 0.815549 12.459 0.749664 12.6249 0.749664C12.7907 0.749664 12.9498 0.815549 13.067 0.932824C13.1843 1.0501 13.2502 1.20916 13.2502 1.37501C13.2502 1.54086 13.1843 1.69992 13.067 1.8172L7.88345 7.00001L13.067 12.1828Z" fill="#4D4D4D" />
            </svg>
          </div>
        </div>
      )}

      <div className="info-content">
        <AnimatedIcon>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M19.5 3.75H4.5C4.10218 3.75 3.72064 3.90804 3.43934 4.18934C3.15804 4.47064 3 4.85218 3 5.25V10.5C3 15.4425 5.3925 18.4378 7.39969 20.0803C9.56156 21.8484 11.7122 22.4484 11.8059 22.4738C11.9348 22.5088 12.0708 22.5088 12.1997 22.4738C12.2934 22.4484 14.4413 21.8484 16.6059 20.0803C18.6075 18.4378 21 15.4425 21 10.5V5.25C21 4.85218 20.842 4.47064 20.5607 4.18934C20.2794 3.90804 19.8978 3.75 19.5 3.75ZM19.5 10.5C19.5 13.9753 18.2194 16.7962 15.6937 18.8831C14.5943 19.7885 13.344 20.493 12 20.9644C10.6736 20.5012 9.4387 19.8092 8.35125 18.9197C5.79563 16.8291 4.5 13.9969 4.5 10.5V5.25H19.5V10.5ZM7.71937 13.2806C7.57864 13.1399 7.49958 12.949 7.49958 12.75C7.49958 12.551 7.57864 12.3601 7.71937 12.2194C7.86011 12.0786 8.05098 11.9996 8.25 11.9996C8.44902 11.9996 8.63989 12.0786 8.78063 12.2194L10.5 13.9397L15.2194 9.21937C15.2891 9.14969 15.3718 9.09442 15.4628 9.0567C15.5539 9.01899 15.6515 8.99958 15.75 8.99958C15.8485 8.99958 15.9461 9.01899 16.0372 9.0567C16.1282 9.09442 16.2109 9.14969 16.2806 9.21937C16.3503 9.28906 16.4056 9.37178 16.4433 9.46283C16.481 9.55387 16.5004 9.65145 16.5004 9.75C16.5004 9.84855 16.481 9.94613 16.4433 10.0372C16.4056 10.1282 16.3503 10.2109 16.2806 10.2806L11.0306 15.5306C10.961 15.6004 10.8783 15.6557 10.7872 15.6934C10.6962 15.7312 10.5986 15.7506 10.5 15.7506C10.4014 15.7506 10.3038 15.7312 10.2128 15.6934C10.1217 15.6557 10.039 15.6004 9.96937 15.5306L7.71937 13.2806Z" fill="#1088F4" />
          </svg>
        </AnimatedIcon>
        <h2 className="info-title">{title}</h2>
        <p className="info-description" dangerouslySetInnerHTML={{ __html: description }} />

        {children}

        {currentStep && totalSteps && (
          <div className="step-indicator">
            <div
              className={`step-arrow step-prev ${onPrev ? 'clickable' : 'disabled'}`}
              onClick={onPrev}
              style={{ cursor: onPrev ? 'pointer' : 'default' }}
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M12.9422 15.8078C13.0003 15.8659 13.0463 15.9348 13.0777 16.0107C13.1092 16.0865 13.1254 16.1679 13.1254 16.25C13.1254 16.3321 13.1092 16.4134 13.0777 16.4893C13.0463 16.5652 13.0003 16.6341 12.9422 16.6922C12.8841 16.7502 12.8152 16.7963 12.7393 16.8277C12.6634 16.8592 12.5821 16.8753 12.5 16.8753C12.4179 16.8753 12.3366 16.8592 12.2607 16.8277C12.1848 16.7963 12.1159 16.7502 12.0578 16.6922L5.80782 10.4422C5.74971 10.3841 5.70361 10.3152 5.67215 10.2393C5.6407 10.1634 5.62451 10.0821 5.62451 9.99998C5.62451 9.91785 5.6407 9.83652 5.67215 9.76064C5.70361 9.68477 5.74971 9.61584 5.80782 9.55779L12.0578 3.30779C12.1751 3.19052 12.3342 3.12463 12.5 3.12463C12.6659 3.12463 12.8249 3.19052 12.9422 3.30779C13.0595 3.42507 13.1254 3.58413 13.1254 3.74998C13.1254 3.91583 13.0595 4.07489 12.9422 4.19217L7.1336 9.99998L12.9422 15.8078Z" fill="#1A1A1A" />
              </svg>
            </div>
            <span className="step-text">{currentStep} από {totalSteps}</span>
            <div
              className={`step-arrow step-next ${onNext ? 'clickable' : 'disabled'}`}
              onClick={onNext}
              style={{ cursor: onNext ? 'pointer' : 'default' }}
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M14.192 10.4422L7.94205 16.6922C7.88398 16.7502 7.81504 16.7963 7.73917 16.8277C7.6633 16.8592 7.58198 16.8753 7.49986 16.8753C7.41774 16.8753 7.33642 16.8592 7.26055 16.8277C7.18468 16.7963 7.11574 16.7502 7.05767 16.6922C6.9996 16.6341 6.95354 16.5652 6.92211 16.4893C6.89069 16.4134 6.87451 16.3321 6.87451 16.25C6.87451 16.1679 6.89069 16.0865 6.92211 16.0107C6.95354 15.9348 6.9996 15.8659 7.05767 15.8078L12.8663 9.99998L7.05767 4.19217C6.9404 4.07489 6.87451 3.91583 6.87451 3.74998C6.87451 3.58413 6.9404 3.42507 7.05767 3.30779C7.17495 3.19052 7.33401 3.12463 7.49986 3.12463C7.66571 3.12463 7.82477 3.19052 7.94205 3.30779L14.192 9.55779C14.2502 9.61584 14.2963 9.68477 14.3277 9.76064C14.3592 9.83652 14.3754 9.91785 14.3754 9.99998C14.3754 10.0821 14.3592 10.1634 14.3277 10.2393C14.2963 10.3152 14.2502 10.3841 14.192 10.4422Z" fill="#1A1A1A" />
              </svg>
            </div>
          </div>
        )}
      </div>

    </div>
  );
};
